리액트 앱 배포하기

1. 프로젝트 빌드하기
빌드: 배포를 위해 파일을 생성하는 과정.
- 개발 과정에서 개발자의 편의를 위해 제공했던 기능은 물론, 소스코 드의 공백 제거와 이미지 파일의 압축 작업도 모두 빌드 과정의 일환
- Create React App은 앱을 쉽게 배포할 수 있도록 간단한 명령어로 된 빌드 기능 제공

명령어: npm run build

- 빌드 파일의 내용을 보면, 배포 용량을 줄이기 위해 공백이 모두 제거되어 있음.
- 빌드 파일은 클라이언트, 즉 웹 브라우저에 전달할 팔일.

2. 파이어 베이스로 배포
웹 서비스는 특별한 일이 없는 한, 언제든지 사용자가 접속할 수 있도록 연중무휴로 가동되어야 한다.
- 이를 위해 365일 내내 가동되는 서버 컴퓨터가 필요하지만 개인용 실습 PC나 노트북은 외부 접속에 대한 허용 설정이 제한되거나 전원 공급 등의 문제가 발생할 수 있다.
- 클라우드 호스팅 : 이미 잘 구축된 웹 서버의 일부 공간을 임대해 배포하는 것
- 파이어베이스(구글): 트래픽이 많지 않으면 무료로 호스팅할 수 있음

1) 파이어베이스 프로젝트 생성하기
- https://firebase.google.com/ 접속
- 콘솔로 이동(우측 상단)
- 프로젝트 만들기
- Google 애널리틱스 사용 설정 해제
-
2) Firebase 호스팅 설정 시작
- 프로젝트 상세 페이지 왼쪽 사이드바 [빌드] - [Hosting] 메뉴 클릭
- 호스팅 페이지에서 <시작하기> 버튼 눌러 호스팅 설정 시작

3) Firebase CLI 설치
: npm 명령 처럼 터미널에서 호스팅을 설정하는 파이어베이스의 지원 도구

cmd 에서
npm install -g firebase-tools

설치 후 added 601 packages in 19s...가 나온다면 정상 설치

4) 프로젝트 호스팅 구성 설정
[1]
- Command Prompt로 터미널을 만들고
firebase login
입력

- CLI 사용 및 에러 수집에 동의하는지 묻는 메시지가 나오면 y 입력

[2]
- 터미널에 출력된 URL을 방문해 로그인 하라는 메시지가 나오고, Firebase CLI 로그인 페이지로 접속
- 본인이 접속한 구글 계정으로 로그인

[3]
터미널에 firebase init 입력

- Are you ready to proceed? : y
- Hosting: Configure...
- Use an existing project
- Enter
- ...public directory? : build
- ... single-page app...: y
- ... deloys with Github?: y
- y

[4] 파일별로 저장된 설정 내용
firebase.json: 호스팅 구성을 정의/ 구성 정보에는 어떤 폴더를 기준으로 배포할지, 배포할 때 어떤 파일을 무시할지, 호스팅 대상 사이트는 어디에 있는지 등을 포함
.firebaserc: 배포 대상 프로젝트를 정의


5) 파이어베이스 호스팅에 배포하기
[1]
npm run build && firebase deploy
- 프로젝트를 빌드하고 성공하면 즉시 파이어베이스 호스팅으로 배포하라는 명령

[2]
- 배포를 완료하면 배포결과 아래에 Hosting URL 출력
- Hosting URL: https://insidesj-emotion-diary.web.app

[3] URL로 접속해도 [감정 일기장]이 나타나지 않고 "Firebase hosting setup complete"와 같은 메시지가 나타난다면 아직 호스팅이 완료되지 않은 상태.
- 30분~1시간 정도 기다린 다음 다시 확인
- 그래도 안나타나면 firebase init 명령으로 포르젝트 호스팅 구성을 처음부터 다시 설정

[4]
2022년 6월 기준, 파이어베이스는 무료 호스팅으로 10GB의 스토리지, 일 360MB의 데이터를 전송할 수 있는 서비스
- 트래픽이 급증해 용량 초과시 자동으로 프로젝트 호스팅 중단


6) 원하는 이름으로 도메인 변경
[1] 파이어베이스 호스팅 설정 페이지 맨 아래 <다른 사이트추가> 버튼 클릭

[2] 원하는 주소 입력 후 <사이트 추가> 버튼 클릭

[3] 추가한 사이트의 도메인으로 배포할 수 있도록 호스팅 구성 변경 후 다시 배포
- firebase.json에서 hosting 항목 아래에 site 프로퍼티 추가
- 배포 명령(npm run build && firebase deploy)을 입력해 프로젝트 리빌드

[4] 이미 배포한 프로젝트에서 기능을 추가 또는 제가 하는 코드 수정이 발생했을 때도
npm run build && firebase deploy
명령으로 리빌드 하면 최신 버전으로 다시 배포할 수 있다.


7) 오픈 그래프 설정 확인
: 배포한 주소를 카톡이나 SNS에 업로드하여 오픈 그래프 태그 성정이 잘 되는지 확인